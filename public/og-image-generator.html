<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>OG Image Generator — The AI Brief</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700;900&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700;8..60,900&display=swap');
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #444; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; padding: 40px; font-family: sans-serif; }
  canvas { box-shadow: 0 4px 30px rgba(0,0,0,0.4); max-width: 100%; height: auto; }
  .actions { margin-top: 20px; }
  .actions button {
    font-size: 16px; font-weight: 700; padding: 12px 32px;
    background: #8b0000; color: #fff; border: none; border-radius: 4px; cursor: pointer;
  }
  .actions button:hover { background: #6b0000; }
  p.hint { color: #aaa; font-size: 13px; margin-top: 12px; text-align: center; max-width: 500px; }
</style>
</head>
<body>

<canvas id="og" width="1200" height="630"></canvas>
<div class="actions">
  <button onclick="downloadPNG()">Download og-image.png</button>
</div>
<p class="hint">Save the downloaded file to your project's <code>public/</code> folder as <code>og-image.png</code>, then push.</p>

<script>
/*
  Mobile-optimized OG image: single-panel, stacked layout.
  Big bold headline, clear branding, readable at iMessage thumbnail size (~300px wide).
  No two-panel split — everything is centered and large.
*/
document.fonts.ready.then(function() {
  var c = document.getElementById('og');
  var ctx = c.getContext('2d');
  var W = 1200, H = 630;

  // Full dark background
  ctx.fillStyle = '#1a1a1a';
  ctx.fillRect(0, 0, W, H);

  // Top red accent bar
  ctx.fillStyle = '#8b0000';
  ctx.fillRect(0, 0, W, 8);

  // Bottom red accent bar
  ctx.fillStyle = '#8b0000';
  ctx.fillRect(0, H - 8, W, 8);

  // --- BRANDING at top ---
  ctx.textAlign = 'center';

  // "The AI Brief" logo — large
  ctx.fillStyle = '#fffdf8';
  ctx.font = '900 54px "Source Serif 4", Georgia, serif';
  ctx.fillText('The AI Brief', W / 2, 80);

  // Red rule under logo
  ctx.fillStyle = '#8b0000';
  ctx.fillRect(W / 2 - 80, 100, 160, 3);

  // MORNING EDITION badge
  ctx.fillStyle = '#8b0000';
  roundRect(ctx, W / 2 - 100, 118, 200, 26, 3);
  ctx.fill();
  ctx.fillStyle = '#fffdf8';
  ctx.font = '700 12px "Source Sans 3", sans-serif';
  ctx.fillText('MORNING EDITION', W / 2, 136);

  // --- HEADLINE — centered, readable at thumbnail size ---
  ctx.fillStyle = '#fffdf8';
  ctx.font = '900 44px "Source Serif 4", Georgia, serif';

  var headline = 'The Pentagon Wants AI Without Guardrails. Anthropic Said No.';
  var lines = wrapText(ctx, headline, W - 200, 44);
  var lineHeight = 56;
  var headlineStartY = 220;
  lines.forEach(function(line, i) {
    ctx.fillText(line, W / 2, headlineStartY + i * lineHeight);
  });

  // Subhead — smaller, muted
  var subY = headlineStartY + lines.length * lineHeight + 24;
  ctx.fillStyle = '#888';
  ctx.font = '400 22px "Source Serif 4", Georgia, serif';
  ctx.fillText('Plus: India\'s $67B AI summit, safety researchers quitting,', W / 2, subY);
  ctx.fillText('and more in today\'s briefing.', W / 2, subY + 30);

  // --- BOTTOM ---
  // Thin separator
  ctx.fillStyle = '#333';
  ctx.fillRect(80, H - 90, W - 160, 1);

  // Date + URL
  ctx.fillStyle = '#555';
  ctx.font = '600 15px "Source Sans 3", sans-serif';
  ctx.fillText('February 19, 2026  ·  the-ai-brief-lilac.vercel.app', W / 2, H - 50);
});

function wrapText(ctx, text, maxWidth, fontSize) {
  var words = text.split(' ');
  var lines = [];
  var currentLine = words[0];

  for (var i = 1; i < words.length; i++) {
    var test = currentLine + ' ' + words[i];
    var metrics = ctx.measureText(test);
    if (metrics.width > maxWidth) {
      lines.push(currentLine);
      currentLine = words[i];
    } else {
      currentLine = test;
    }
  }
  lines.push(currentLine);
  return lines;
}

function roundRect(ctx, x, y, w, h, r) {
  ctx.beginPath();
  ctx.moveTo(x + r, y);
  ctx.lineTo(x + w - r, y);
  ctx.quadraticCurveTo(x + w, y, x + w, y + r);
  ctx.lineTo(x + w, y + h - r);
  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
  ctx.lineTo(x + r, y + h);
  ctx.quadraticCurveTo(x, y + h, x, y + h - r);
  ctx.lineTo(x, y + r);
  ctx.quadraticCurveTo(x, y, x + r, y);
  ctx.closePath();
}

function downloadPNG() {
  var c = document.getElementById('og');
  var link = document.createElement('a');
  link.download = 'og-image.png';
  link.href = c.toDataURL('image/png');
  link.click();
}
</script>
</body>
</html>
